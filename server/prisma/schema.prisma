generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
  id               String         @id @default(uuid())
  email            String         @unique
  // Password dibuat opsional karena kedepannya dihandle Supabase [cite: 2026-02-03]
  password         String?
  name             String
  // Tambahkan supabase_id untuk sinkronisasi Auth Hybrid kita [cite: 2026-01-12]
  supabase_id      String?        @unique 
  dailyLimit       Float          @default(0)
  monthlyIncome    Float          @default(0)
  savingsTarget    Float          @default(0)
  isPercentTarget  Boolean        @default(false)
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
  logs             DailyLog[]
  fixedExpenses    FixedExpense[]
  pushSubscription String?
}

model DailyLog {
  id          String   @id @default(uuid())
  description String
  amount      Float
  category    String
  date        DateTime @default(now())
  userId      String
  user        User     @relation(fields: [userId], references: [id])
}

model FixedExpense {
  id      String @id @default(uuid())
  name    String
  amount  Float
  dueDate Int
  userId  String
  user    User   @relation(fields: [userId], references: [id])
}
